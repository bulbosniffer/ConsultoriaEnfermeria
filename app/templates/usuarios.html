{% extends "base.html" %}

{% block title %}Lista de Usuarios{% endblock %}

{% block encabezado %}Gestión de Usuarios{% endblock %}

{% block contenido %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Usuarios</title>
</head>
<body>
    <h2>Usuarios Registrados</h2>
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Rol</th>
            <th>Acción</th>
        </tr>
        {% for u in usuarios %}
<tr>
    <td>{{ u.id }}</td>
    <td>{{ u.usuario }}</td>
    <td>{{ u.rol }}</td>
    <td>
        {% if u.usuario != session['usuario'] %}
            <a href="{{ url_for('admin.editar_usuario', usuario_id=u.id) }}">Editar</a>
            <form method="post" action="{{ url_for('admin.eliminar_usuario', usuario_id=u.id) }}" onsubmit="return confirm('¿Eliminar {{ u.usuario }}?')">
                <button type="submit">Eliminar</button>
            </form>
        {% else %}
            <em>(Tú mismo)</em>
        {% endif %}
    </td>
</tr>
{% endfor %}
    </table>
    <br>
    <a href="{{ url_for('admin.panel') }}">Volver al panel</a>
{% endblock %}
</body>
</html>

